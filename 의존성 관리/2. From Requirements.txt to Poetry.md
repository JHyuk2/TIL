# 2. 기존 방식과 Poetry 비교

`requirements.txt`는 Python 프로젝트에서 의존성을 관리하기 위해 가장 널리 사용되는 파일 형식입니다.
쉽게 만들고 설치할 수 있어 방식은 간단하지만, 프로젝트 관리에서의 버전 충돌 등 한계가 있을 수 있습니다.



`poetry`는 이러한 문제를 해결하며, 의존성 관리와 가상환경 설정을 자동화하여 효율적인 선택지를 제공합니다.



## 기존 방식: `requirements.txt`



### 사용 방법

1. **`pip freeze`로 패키지 목록 생성`**:

   ```bash
   pip freeze > requirements.txt
   ```

2. **`requirements.txt`를 사용한 설치**:

   ```bash
   pip install -r requirements.txt
   ```

   

### 장점
- Python 내장 도구만으로 간단히 관리 가능.
- 설치된 라이브러리 버전을 기록하여 공유 가능.

### 한계
1. **의존성 충돌 문제**:
   - 패키지 간의 하위 의존성을 별도로 관리하지 않아 충돌 가능성이 높음.
2. **재현성 부족**:
   - 버전 고정이 명확하지 않을 경우, 동일한 환경을 정확히 재현하기 어려움.
3. **수동 관리의 어려움**:
   - 새 패키지 추가/삭제 시, 매번 수동으로 목록을 업데이트해야 함.

---



## 2. Poetry 소개

Poetry는 `pyproject.toml` 파일을 기반으로 Python 패키지와 의존성을 체계적으로 관리하는 현대적인 도구입니다.

### 주요 기능과 장점
1. **CLI 기반 의존성 관리**:
   
   - 명령어로 간단히 패키지를 추가, 삭제, 업데이트할 수 있습니다.
     ```bash
     poetry add flask
     poetry remove flask
     ```
2. **가상환경 자동 생성**:
   - 프로젝트별 가상환경을 자동으로 관리하여 격리된 환경 제공.
3. **버전 고정 및 재현성**:
   
   - `poetry.lock` 파일을 통해 정확히 동일한 환경을 재현 가능.
4. **의존성 충돌 방지**:
   - 의존성 트리를 분석하여 충돌 가능성을 미리 해결.



## Poetry 사용 예시

### 프로젝트 초기화 및 설정

1. **Poetry 설치**:

   ```bash
   pip install poetry
   ```

2. **프로젝트 초기화**:

   ```bash
   poetry init
   ```

3. **의존성 추가 제거**:

   ```bash
   poetry add flask
   poetry remove flask
   ```

   - 선택한 패키지를 추가하며, `pyproject.toml`과 `poetry.lock`파일이 자동으로 업데이트

4. **개발 의존성 추가**:

   ```bash
   poetry add pytest --dev
   ```

   - 개발 전용 패키지로 추가하며, 배포 시 포함되지 않음.

   

### 가상환경 관리

1. **가상환경 활성화**:

   ```bash
   poetry shell
   ```

   - 프로젝트별 격리된 가상환경을 자동으로 생성 및 활성화

2. **가상환경 비활성화**:

   ```bash
   exit
   ```

3. **가상환경 외부에서 명령 실행**

   ```bash
   poetry run python app.py
   ```

   - 가상환경을 활성화하지 않고도 명령어 실행 가능



### Poetry 설치 명령 (`Poetry install`) 사용 시기

- `poetry install`은 **기존 프로젝트를 처음 설치하거나 복원할 때** 사용합니다.

  - 예: 협업 시, `pyproject.toml`과 `poetry.lock` 파일이 공유된 상태에서 동일한 환경을 설치

    ```bash
    poetry install
    ```

  - 이 명령은 `poetry.lock` 파일에 명시된 패키지와 버전에 따라 모든 의존성을 설치합니다.
  - 새로운 의존성을 추가할 필요 없이, 기존 프로젝트 환경을 재현할 때 유용합니다.

  

- 패키지의 지속적인 관리

  ```bash
  poetry update
  ```



---



## 기존 방식 vs Poetry

| **특징**    | **`requirements.txt`**  | **Poetry**                    |
| ----------- | ----------------------- | ----------------------------- |
| 의존성 관리 | 단순 패키지 목록 관리   | 의존성 트리 자동 분석 및 관리 |
| 재현 가능성 | 제한적                  | `poetry.lock`으로 완벽히 재현 |
| 사용 편의성 | 수동 목록 업데이트 필요 | CLI 명령어로 간단 관리        |
| 가상환경    | 별도 생성 필요          | 자동 생성 및 관리             |



### 요약

`requirements.txt`는 간단하지만 의존성 충돌 관리와 재현성 확보에서 한계가 있습니다.

`Poetry`는 의존성을 자동으로 관리하고 환경 제공에 강점이 있어, 더 자주 쓰이는 환경이 되고 있습니다.



## 다음 단계

Poetry는 기본적인 의존성 관리 외에도 프로젝트 스크립트 관리, 다중 파이썬 환경 지원, 배포 자동화와 같은 고급 기능을 제공합니다.

자세한 내용은  [3. Poetry Advanced Guide](poetry_advanced_guide.md) 에서 확인하실 수 있습니다.

 